<!DOCTYPE html>
<html lang="mk">
<head>
  <meta charset="UTF-8">
  <title>30x30 Tile in AR ‚Äì Floor & Wall</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
      margin-top: 50px;
    }
    /* –û—Å–Ω–æ–≤–µ–Ω —Å—Ç–∏–ª –∑–∞ –º–æ–¥–µ–ª-–ø—Ä–∏–∫–∞–∑–æ—Ç */
    model-viewer {
      width: 100%;
      max-width: 800px;
      height: 600px;
      border: 1px solid #ccc;
      margin: 0 auto;
      display: block;
    }
    /* –°—Ç–∏–ª –∑–∞ –∫–æ–ø—á–∏—ö–∞—Ç–∞ */
    .button-row {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .button-row button {
      font-size: 16px;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      background-color: #333;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .button-row button:hover {
      background-color: #555;
    }
    .button-row button.active {
      background-color: #4caf50; /* –∑–µ–ª–µ–Ω–∞ –∫–æ–≥–∞ –µ –∞–∫—Ç–∏–≤–Ω–∞ –æ–ø—Ü–∏—ò–∞—Ç–∞ */
    }
  </style>
</head>
<body>
<h1>View 30x30 Tile in AR</h1>

<!-- 1. –ú–æ–¥–µ–ª-–ø—Ä–µ–≥–ª–µ–¥ —Å–æ –ø–æ–¥–≥–æ—Ç–≤–µ–Ω–∏ AR-–∞—Ç—Ä–∏–±—É—Ç–∏ -->
<model-viewer
        id="viewer"
        src="models/tile3.glb"
        ios-src="models/pattern.usdz"
        alt="–ü—Ä–æ—Å—Ç–æ—Ä–∏—ò–∞ —Å–æ –ø–ª–æ—á–∫–∏ –Ω–∞ –ø–æ–¥–æ—Ç –∏ —ï–∏–¥–æ–≤–∏—Ç–µ"
        camera-controls
        auto-rotate
        auto-rotate-delay="1s"
        camera-orbit="45deg 75deg 2.5m"
        camera-target="0m 0m 0m"
        field-of-view="50deg"
        environment-image="textures/hdri_sky_015.hdr"
        poster="textures/tile2.jpg"
        ar
        ar-modes="webxr scene-viewer quick-look"
        ar-placement="floor"
        ar-scale="auto">
</model-viewer>

<!-- 2. –†–µ–¥ —Å–æ –∫–æ–ø—á–∏—ö–∞ –∑–∞ –ø–æ–¥/—ï–∏–¥ –∏ View in AR -->
<div class="button-row">
  <button id="toFloor" class="active">–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ –ø–æ–¥</button>
  <button id="toWall">–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ —ï–∏–¥</button>
  <button id="ar-button">üì± View in AR</button>
</div>

<!-- 3. JavaScript –∑–∞ –¥–∏–Ω–∞–º–∏—á–∫–æ –º–µ–Ω—É–≤–∞—ö–µ –Ω–∞ ar-placement –∏ –∞–∫—Ç–∏–≤–∏—Ä–∞—ö–µ –Ω–∞ AR -->
<script>
  const viewer = document.getElementById('viewer');
  const btnFloor = document.getElementById('toFloor');
  const btnWall = document.getElementById('toWall');
  const btnAR = document.getElementById('ar-button');

  // –î–µ—Ç–µ–∫—Ç–∏—Ä–∞—ö–µ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Android / iOS)
  const userAgent = navigator.userAgent || navigator.vendor || window.opera;
  const isAndroid = /android/i.test(userAgent);
  const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

  // –î–∏–Ω–∞–º–∏—á–∫–∏ –ø–æ—Å—Ç–∞–≤–∏ src/ios-src —Å–ø–æ—Ä–µ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
  if (isIOS) {
    // iOS: –∫–æ—Ä–∏—Å—Ç–∏ USDZ –∑–∞ Quick Look, –∞ GLB –∫–∞–∫–æ —Ä–µ–∑–µ—Ä–≤–µ–Ω
    viewer.setAttribute("ios-src", "models/pattern.usdz");
    viewer.setAttribute("src", "models/tile3.glb");
  } else if (isAndroid) {
    // Android: –∫–æ—Ä–∏—Å—Ç–∏ GLB
    viewer.setAttribute("src", "models/tile3.glb");
  }

  // –í—Å—É—à–Ω–æ—Å—Ç, –ø–æ—á–µ—Ç–Ω–æ ar-placement="floor" –≤–µ—ú–µ –µ –∑–∞–¥–∞–¥–µ–Ω –≤–æ HTML
  btnFloor.classList.add('active');

  // –ö–ª–∏–∫ –Ω–∞ –∫–æ–ø—á–µ—Ç–æ "–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ –ø–æ–¥"
  btnFloor.addEventListener('click', () => {
    viewer.setAttribute('ar-placement', 'floor');
    btnFloor.classList.add('active');
    btnWall.classList.remove('active');
  });

  // –ö–ª–∏–∫ –Ω–∞ –∫–æ–ø—á–µ—Ç–æ "–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ —ï–∏–¥"
  btnWall.addEventListener('click', () => {
    viewer.setAttribute('ar-placement', 'wall');
    btnWall.classList.add('active');
    btnFloor.classList.remove('active');
  });

  // –ö–ª–∏–∫ –Ω–∞ –∫–æ–ø—á–µ—Ç–æ "View in AR"
  btnAR.addEventListener('click', () => {
    if (viewer && typeof viewer.activateAR === 'function') {
      viewer.activateAR();
    } else {
      alert("AR not supported or model not loaded.");
    }
  });
</script>
</body>
</html>
