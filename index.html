<!DOCTYPE html>
<html lang="mk">
<head>
  <meta charset="UTF-8" />
  <title>Tile AR ‚Äì –ü–æ–¥ –∏–ª–∏ –Ö–∏–¥</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
      margin-top: 50px;
    }
    #viewer {
      width: 100%;
      max-width: 800px;
      height: 600px;
      border: 1px solid #ccc;
      margin-bottom: 20px;
    }
    .button-row {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: 1px solid #888;
      border-radius: 4px;
      background-color: #f7f7f7;
      transition: background-color 0.2s;
    }
    button:hover {
      background-color: #e0e0e0;
    }
    button.active {
      background-color: #d0f0d0;
      border-color: #4caf50;
    }
  </style>
</head>
<body>

<h1>View Tile in AR (–ü–æ–¥ & –Ö–∏–¥)</h1>

<!-- 1. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω model-viewer –±–µ–∑ src/ios-src –≤–æ –ø–æ—á–µ—Ç–æ–∫ -->
<model-viewer
        id="viewer"
        alt="Tile –∑–∞ –ø–æ–¥ –∏ —ï–∏–¥"
        camera-controls
        auto-rotate
        auto-rotate-delay="1s"
        camera-orbit="45deg 75deg 2.5m"
        camera-target="0m 0m 0m"
        field-of-view="50deg"
        environment-image="textures/hdri_sky_015.hdr"
        poster="textures/tile2.jpg"
        ar
        ar-modes="scene-viewer quick-look webxr"
        ar-scale="auto"
        style="width: 100%; height: 600px; border: 1px solid #ccc;">
</model-viewer>

<!-- 2. –ö–æ–ø—á–∏—ö–∞ –∑–∞ –∏–∑–±–æ—Ä -->
<div class="button-row">
  <button id="btnFloor" class="active">–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ –ø–æ–¥</button>
  <button id="btnWall">–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ —ï–∏–¥</button>
  <button id="btnAR">üì± View in AR</button>
</div>

<!-- 3. JavaScript –∑–∞ –º–µ–Ω—É–≤–∞—ö–µ –Ω–∞ –º–æ–¥–µ–ª–æ—Ç -->
<script>
  const viewer = document.getElementById('viewer');
  const btnFloor = document.getElementById('btnFloor');
  const btnWall = document.getElementById('btnWall');
  const btnAR = document.getElementById('btnAR');

  // –ò–Ω–∏—Ü–∏—ò–∞–ª–Ω–æ: –∫–æ—Ä–∏—Å—Ç–∏ ‚Äûtile_floor‚Äú (horizontal)
  setModel('floor');
  btnFloor.classList.add('active');

  // –°–ª—É—à–∞—á –∑–∞ ‚Äû–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ –ø–æ–¥‚Äú
  btnFloor.addEventListener('click', () => {
    setModel('floor');
    btnFloor.classList.add('active');
    btnWall.classList.remove('active');
  });

  // –°–ª—É—à–∞—á –∑–∞ ‚Äû–ü–æ—Å—Ç–∞–≤–∏ –Ω–∞ —ï–∏–¥‚Äú
  btnWall.addEventListener('click', () => {
    setModel('wall');
    btnWall.classList.add('active');
    btnFloor.classList.remove('active');
  });

  // Shortcut –∑–∞ ‚ÄûView in AR‚Äú
  btnAR.addEventListener('click', () => {
    if (viewer && typeof viewer.activateAR === 'function') {
      viewer.activateAR();
    } else {
      alert("AR –Ω–µ –µ –ø–æ–¥–¥—Ä–∂–∞–Ω–æ –∏–ª–∏ –º–æ–¥–µ–ª–æ—Ç –Ω–µ –µ –≤—á—Ç–µ–Ω.");
    }
  });

  // –§—É–Ω–∫—Ü–∏—ò–∞ —à—Ç–æ —ò–∞ –º–µ–Ω—É–≤–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—ò–∞—Ç–∞ src + ios-src —Å–ø–æ—Ä–µ–¥ –∏–∑–±–æ—Ä–æ—Ç
  function setModel(type) {
    if (type === 'floor') {
      // Horizontal (–ø–æ–¥): use tile_floor
      viewer.setAttribute('src',    'models/tile_floor.glb');
      viewer.setAttribute('ios-src','models/tile_floor.usdz');
    } else if (type === 'wall') {
      // Vertical (—ï–∏–¥): use tile_wall
      viewer.setAttribute('src',    'models/tile_wall.glb');
      viewer.setAttribute('ios-src','models/tile_wall.usdz');
    }
  }
</script>
</body>
</html>
